<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"unix2dos.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1,dimmer:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.json"}</script><meta name="description" content="åœ¨åˆ¶ä½œ Docker Images ä¹‹å‰, æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Docker å®˜æ–¹æä¾›äº†ä¸€äº›å»ºè®®å’Œå‡†åˆ™ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å»ºè®®éµå®ˆã€‚å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦å¯ä»¥å®¹æ˜“çš„åˆ›å»ºã€é”€æ¯ã€é…ç½®ä½ çš„å®¹å™¨ã€‚å¤šæ•°æƒ…å†µï¼Œæ„å»ºé•œåƒçš„æ—¶å€™æ˜¯å°† Dockerfile å’Œæ‰€éœ€æ–‡ä»¶æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ã€‚ä½†ä¸ºäº†æ„å»ºæ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ .dockerignore æ–‡ä»¶æ¥æ’é™¤æ–‡ä»¶å’Œç›®å½•ã€‚é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…ï¼Œæ„å»ºé•œåƒåº”è¯¥å°½å¯èƒ½å‡å°‘å¤æ‚æ€§ã€ä¾èµ–"><meta name="keywords" content="linux,docker"><meta property="og:type" content="article"><meta property="og:title" content="è®°å½•ä¸€æ¬¡dockeré•œåƒçš„æ„å»ºè¿‡ç¨‹"><meta property="og:url" content="https://unix2dos.github.io/p/2450240c.html"><meta property="og:site_name" content="Levon&#39;s Blog"><meta property="og:description" content="åœ¨åˆ¶ä½œ Docker Images ä¹‹å‰, æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Docker å®˜æ–¹æä¾›äº†ä¸€äº›å»ºè®®å’Œå‡†åˆ™ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å»ºè®®éµå®ˆã€‚å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦å¯ä»¥å®¹æ˜“çš„åˆ›å»ºã€é”€æ¯ã€é…ç½®ä½ çš„å®¹å™¨ã€‚å¤šæ•°æƒ…å†µï¼Œæ„å»ºé•œåƒçš„æ—¶å€™æ˜¯å°† Dockerfile å’Œæ‰€éœ€æ–‡ä»¶æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ã€‚ä½†ä¸ºäº†æ„å»ºæ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ .dockerignore æ–‡ä»¶æ¥æ’é™¤æ–‡ä»¶å’Œç›®å½•ã€‚é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…ï¼Œæ„å»ºé•œåƒåº”è¯¥å°½å¯èƒ½å‡å°‘å¤æ‚æ€§ã€ä¾èµ–"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-08-29T14:42:38.338Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="è®°å½•ä¸€æ¬¡dockeré•œåƒçš„æ„å»ºè¿‡ç¨‹"><meta name="twitter:description" content="åœ¨åˆ¶ä½œ Docker Images ä¹‹å‰, æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Docker å®˜æ–¹æä¾›äº†ä¸€äº›å»ºè®®å’Œå‡†åˆ™ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å»ºè®®éµå®ˆã€‚å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦å¯ä»¥å®¹æ˜“çš„åˆ›å»ºã€é”€æ¯ã€é…ç½®ä½ çš„å®¹å™¨ã€‚å¤šæ•°æƒ…å†µï¼Œæ„å»ºé•œåƒçš„æ—¶å€™æ˜¯å°† Dockerfile å’Œæ‰€éœ€æ–‡ä»¶æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ã€‚ä½†ä¸ºäº†æ„å»ºæ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ .dockerignore æ–‡ä»¶æ¥æ’é™¤æ–‡ä»¶å’Œç›®å½•ã€‚é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…ï¼Œæ„å»ºé•œåƒåº”è¯¥å°½å¯èƒ½å‡å°‘å¤æ‚æ€§ã€ä¾èµ–"><link rel="canonical" href="https://unix2dos.github.io/p/2450240c.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>è®°å½•ä¸€æ¬¡dockeré•œåƒçš„æ„å»ºè¿‡ç¨‹ | Levon's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Levon's Blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">å¾®ä¿¡: L6241425</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>æ—¥å¿—</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a href="https://github.com/unix2dos" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://unix2dos.github.io/p/2450240c.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Levon"><meta itemprop="description" content="ä½ ä»¥å‰é‚£å¤´å‹å‘¢..ä½ å¾—æ”¯æ£±èµ·æ¥å•Š"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Levon's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">è®°å½•ä¸€æ¬¡dockeré•œåƒçš„æ„å»ºè¿‡ç¨‹</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2019-08-24 20:54:46" itemprop="dateCreated datePublished" datetime="2019-08-24T20:54:46+08:00">2019-08-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-29 22:42:38" itemprop="dateModified" datetime="2020-08-29T22:42:38+08:00">2020-08-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-linuxç³»ç»Ÿ/" itemprop="url" rel="index"><span itemprop="name">2-linuxç³»ç»Ÿ</span></a> </span>ï¼Œ <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-linuxç³»ç»Ÿ/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a> </span></span><span id="/p/2450240c.html" class="post-meta-item leancloud_visitors" data-flag-title="è®°å½•ä¸€æ¬¡dockeré•œåƒçš„æ„å»ºè¿‡ç¨‹" title="é˜…è¯»æ¬¡æ•°"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valineï¼š</span> <a title="valine" href="/p/2450240c.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/p/2450240c.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="æœ¬æ–‡å­—æ•°"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span> <span>3.4k</span> </span><span class="post-meta-item" title="é˜…è¯»æ—¶é•¿"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span>3 åˆ†é’Ÿ</span></span></div></header><div class="post-body" itemprop="articleBody"><p>åœ¨åˆ¶ä½œ Docker Images ä¹‹å‰, æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Docker å®˜æ–¹æä¾›äº†ä¸€äº›å»ºè®®å’Œå‡†åˆ™ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å»ºè®®éµå®ˆã€‚</p><ul><li><p>å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦å¯ä»¥å®¹æ˜“çš„åˆ›å»ºã€é”€æ¯ã€é…ç½®ä½ çš„å®¹å™¨ã€‚</p></li><li><p>å¤šæ•°æƒ…å†µï¼Œæ„å»ºé•œåƒçš„æ—¶å€™æ˜¯å°† Dockerfile å’Œæ‰€éœ€æ–‡ä»¶æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ã€‚ä½†ä¸ºäº†æ„å»ºæ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <a href="https://deepzz.com/post/dockerfile-reference.html#toc_6" target="_blank" rel="noopener">.dockerignore</a> æ–‡ä»¶æ¥æ’é™¤æ–‡ä»¶å’Œç›®å½•ã€‚</p></li><li><p>é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…ï¼Œæ„å»ºé•œåƒåº”è¯¥å°½å¯èƒ½å‡å°‘å¤æ‚æ€§ã€ä¾èµ–å…³ç³»ã€æ„å»ºæ—¶é—´åŠé•œåƒå¤§å°ã€‚</p></li><li><p>æœ€å°åŒ–å±‚æ•°ã€‚ Dockerfileçš„ä¸€è¡Œ(é™¤MAINTAINERå¤–)å¯¹åº”é•œåƒçš„ä¸€å±‚ï¼Œä¸ºä½¿å±‚æ•°è¶³å¤Ÿå°ï¼Œæ•…å¯ä»¥å°†ç±»ä¼¼çš„å‘½ä»¤ä¸²èµ·æ¥ï¼Œæ¯”å¦‚RUN æŒ‡ä»¤ï¼Œå¯ä»¥ä½¿ç”¨&amp;&amp;è¿æ¥å¤šä¸ªæŒ‡ä»¤ï¼Œå¦‚æ­¤ä¹Ÿåªæœ‰ä¸€å±‚ã€‚</p></li><li><p>æ’åºå¤šè¡Œå‚æ•°ï¼Œé€šè¿‡å­—æ¯å°†å‚æ•°æ’åºæ¥ç¼“è§£ä»¥åçš„å˜åŒ–ï¼Œè¿™å°†å¸®ä½ é¿å…é‡å¤çš„åŒ…ã€ä½¿åˆ—è¡¨æ›´å®¹æ˜“æ›´æ–°ï¼Œå¦‚ï¼š</p></li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash">  bzr \</span></span><br><span class="line"><span class="bash">  cvs \</span></span><br><span class="line"><span class="bash">  git \</span></span><br><span class="line"><span class="bash">  mercurial \</span></span><br><span class="line"><span class="bash">  subversion</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0. å‰è¨€"></a>0. å‰è¨€</h3><p>å®¹å™¨å†…æ²¡æœ‰åå°æœåŠ¡çš„æ¦‚å¿µã€‚å®¹å™¨å°±æ˜¯ä¸ºäº†ä¸»è¿›ç¨‹è€Œå­˜åœ¨çš„ï¼Œä¸»è¿›ç¨‹é€€å‡ºï¼Œå®¹å™¨å°±å¤±å»äº†å­˜åœ¨çš„æ„ä¹‰ï¼Œä»è€Œé€€å‡ºï¼Œå…¶å®ƒè¾…åŠ©è¿›ç¨‹ä¸æ˜¯å®ƒéœ€è¦å…³å¿ƒçš„ä¸œè¥¿ã€‚æ‰€ä»¥CMD è¿è¡Œå¯æ‰§è¡Œç¨‹åº, é˜»å¡æ‰å¯ä»¥, è¦ä¸ç„¶ä¼šé€€å‡ºã€‚</p><h3 id="1-FROM-ä»“åº“"><a href="#1-FROM-ä»“åº“" class="headerlink" title="1. FROM ä»“åº“"></a>1. FROM ä»“åº“</h3><p>å°½å¯èƒ½çš„ä½¿ç”¨å®˜æ–¹ä»“åº“å­˜å‚¨çš„é•œåƒä½œä¸ºåŸºç¡€é•œåƒã€‚å®˜æ–¹å»ºè®®ä½¿ç”¨ <a href="https://hub.docker.com/_/debian/" target="_blank" rel="noopener">Debian</a>ï¼Œå¤§å°åœ¨ 150mb å·¦å³ã€‚ä¸è¿‡åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥ç”¨åˆ° <a href="https://hub.docker.com/_/alpine/" target="_blank" rel="noopener">alpine</a> çš„æ¬¡æ•°æ¯”è¾ƒå¤šï¼Œå› ä¸ºå®ƒä»… 5mb å·¦å³ã€‚ busyboxæ›´åªæœ‰1Må¤šã€‚</p><p>å‚è€ƒ: <a href="https://blog.csdn.net/bbwangj/article/details/81088231" target="_blank" rel="noopener">https://blog.csdn.net/bbwangj/article/details/81088231</a></p><h3 id="2-æŒ‡ä»¤"><a href="#2-æŒ‡ä»¤" class="headerlink" title="2. æŒ‡ä»¤"></a>2. æŒ‡ä»¤</h3><h5 id="2-1-COPY-å’Œ-ADD-çš„åŒºåˆ«"><a href="#2-1-COPY-å’Œ-ADD-çš„åŒºåˆ«" class="headerlink" title="2.1 COPY å’Œ ADD çš„åŒºåˆ«"></a>2.1 COPY å’Œ ADD çš„åŒºåˆ«</h5><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨COPY, ä½¿ç”¨ADDçš„å”¯ä¸€åŸå› å°±æ˜¯ä½ æœ‰ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œä½ æƒ³è‡ªåŠ¨è§£å‹åˆ°é•œåƒä¸­ã€‚</p><h5 id="2-2-RUN-å’Œ-CMD-çš„åŒºåˆ«"><a href="#2-2-RUN-å’Œ-CMD-çš„åŒºåˆ«" class="headerlink" title="2.2 RUN å’Œ CMD çš„åŒºåˆ«"></a>2.2 RUN å’Œ CMD çš„åŒºåˆ«</h5><ul><li>RUNå‘½ä»¤æ˜¯åˆ›å»ºDockeré•œåƒçš„æ­¥éª¤ï¼Œä¸€ä¸ªDockerfileä¸­å¯ä»¥æœ‰è®¸å¤šä¸ªRUNå‘½ä»¤ã€‚</li><li>CMDå‘½ä»¤æ˜¯å½“Dockeré•œåƒè¢«å¯åŠ¨åDockerå®¹å™¨å°†ä¼šé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚ä¸€ä¸ªDockerfileä¸­åªèƒ½æœ‰ä¸€ä¸ªCMDå‘½ä»¤ã€‚é€šè¿‡æ‰§è¡Œdocker run $image other_commandå¯åŠ¨é•œåƒå¯ä»¥é‡è½½CMDå‘½ä»¤ã€‚</li></ul><h5 id="2-3-ENTRYPOINT-å’Œ-CMDçš„åŒºåˆ«"><a href="#2-3-ENTRYPOINT-å’Œ-CMDçš„åŒºåˆ«" class="headerlink" title="2.3 ENTRYPOINT å’Œ CMDçš„åŒºåˆ«"></a>2.3 ENTRYPOINT å’Œ CMDçš„åŒºåˆ«</h5><p>The main purpose of a CMD is to provide defaults for an executing container. These defaults can include an executable, or they can omit the executable, in which case you must specify an ENTRYPOINT instruction as well.</p><p>å¦‚æœdocker runæ²¡æœ‰æŒ‡å®šä»»ä½•çš„æ‰§è¡Œå‘½ä»¤æˆ–è€…dockerfileé‡Œé¢ä¹Ÿæ²¡æœ‰entrypointï¼Œé‚£ä¹ˆï¼Œå°±ä¼šä½¿ç”¨cmdæŒ‡å®šçš„é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤æ‰§è¡Œã€‚åŒæ—¶ä¹Ÿä»ä¾§é¢è¯´æ˜äº†entrypointçš„å«ä¹‰ï¼Œå®ƒæ‰æ˜¯çœŸæ­£çš„å®¹å™¨å¯åŠ¨ä»¥åè¦æ‰§è¡Œå‘½ä»¤ã€‚</p><ul><li><p>CMDçš„ç”¨æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">The CMD instruction has three forms:</span><br><span class="line"> </span><br><span class="line">CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;] (exec form, this is the preferred form) //æ¨è</span><br><span class="line">CMD [&quot;param1&quot;,&quot;param2&quot;] (as default parameters to ENTRYPOINT)</span><br><span class="line">CMD command param1 param2 (shell form)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eg1: CMD [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;echo &apos;hello cmd!&apos;&quot;]</span><br><span class="line">eg2: CMD [&quot;hello cmd!&quot;]</span><br><span class="line"> ENTRYPOINT [&quot;echo&quot;]</span><br><span class="line">eg3: CMD echo &quot;hello cmd!&quot;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>entrypointçš„ç”¨æ³•</p><p>An ENTRYPOINT allows you to configure a container that will run as an executable.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ENTRYPOINT has two forms:</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] (exec form, preferred) //æ¨è</span><br><span class="line">ENTRYPOINT command param1 param2 (shell form)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eg1: å¦‚æœå‘½ä»¤åé¢æœ‰ä¸œè¥¿ï¼Œé‚£ä¹ˆåé¢çš„å…¨éƒ¨éƒ½ä¼šä½œä¸ºentrypointçš„å‚æ•°ã€‚å¦‚æœæ²¡æœ‰ï¼Œä½†æ˜¯cmdæœ‰ï¼Œé‚£ä¹ˆcmdçš„å…¨éƒ¨å†…å®¹ä¼šä½œä¸ºentrypointçš„å‚æ•°, ä¼šè¾“å‡º hello cmd çš„</span><br><span class="line"></span><br><span class="line">CMD [&quot;hello cmd!&quot;]</span><br><span class="line">ENTRYPOINT [&quot;echo&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eg2: è¿™ä¸ªæ—¶å€™æ˜¯ä¸ä¼šè¾“å‡º hello cmd çš„</span><br><span class="line"></span><br><span class="line">CMD [&quot;hello cmd!&quot;]</span><br><span class="line">ENTRYPOINT echo</span><br></pre></td></tr></table></figure></li><li><p>è¦†ç›–é—®é¢˜</p><ul><li><p>cmd é™¤éé»˜è®¤, å¦åˆ™è½»æ˜“è¢«è¦†ç›–</p></li><li><p>entrypoint å¯ä»¥ç”¨ â€“entrypoint è¦†ç›–</p></li><li><p>æ‰€ä»¥å»ºè®®entrypointå›ºå®š, cmd è¢«è¦†ç›–, ç»“åˆä½¿ç”¨, å¹¶ä¸”æ°¸è¿œä½¿ç”¨Execè¡¨ç¤ºæ³•</p></li></ul></li></ul><h5 id="2-9-ç¯å¢ƒå˜é‡å†™æ³•"><a href="#2-9-ç¯å¢ƒå˜é‡å†™æ³•" class="headerlink" title="2.9 ç¯å¢ƒå˜é‡å†™æ³•"></a>2.9 ç¯å¢ƒå˜é‡å†™æ³•</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ENV KS_HAVEN_ADDR=&apos;:16097&apos; \</span><br><span class="line">KS_HAVEN_QUIC_ADDR=&apos;:16097&apos;</span><br></pre></td></tr></table></figure><h3 id="3-æ„å»ºé•œåƒ"><a href="#3-æ„å»ºé•œåƒ" class="headerlink" title="3. æ„å»ºé•œåƒ"></a>3. æ„å»ºé•œåƒ</h3><p>åœ¨ Dockerfile æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š <code>docker build -t image_name .</code></p><h5 id="3-1-æ„å»ºçš„ä¸Šä¸‹æ–‡"><a href="#3-1-æ„å»ºçš„ä¸Šä¸‹æ–‡" class="headerlink" title="3.1 æ„å»ºçš„ä¸Šä¸‹æ–‡"></a>3.1 æ„å»ºçš„ä¸Šä¸‹æ–‡</h5><ol><li>c/sæ¶æ„, åœ¨æœåŠ¡ç«¯æ„å»º</li><li>æœåŠ¡ç«¯è¦è·å–æ–‡ä»¶, éœ€è¦æŠŠä¸Šä¸‹æ–‡ç›®å½•æ‰“åŒ…å‘è¿‡å» (COPY ../package.json /app æˆ–è€… COPY /opt/xxxx /app æ— æ³•æˆåŠŸ, è¶…å‡ºäº†ä¸Šä¸‹æ–‡)</li><li>æœ€å¥½å°†dockerfileæ”¾åœ¨ç©ºç›®å½•ä¸‹æˆ–é¡¹ç›®æ ¹ç›®å½•ä¸‹, å¦‚æœæ²¡æœ‰æ‰€éœ€æ–‡ä»¶,æ‹·è´è¿‡æ¥, é¿å…å‘é€å¤ªå¤šæ–‡ä»¶ç»™å¼•æ“</li></ol><h5 id="3-2-é•œåƒ-save-load"><a href="#3-2-é•œåƒ-save-load" class="headerlink" title="3.2 é•œåƒ save load"></a>3.2 é•œåƒ save load</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker images <span class="comment">#æŸ¥çœ‹æ„å»ºçš„image</span></span><br><span class="line"></span><br><span class="line">docker save image/<span class="built_in">test</span> &gt; image_test.tar.gz <span class="comment"># save image</span></span><br><span class="line"></span><br><span class="line">docker load -i image_test.tar.gz <span class="comment"># load image</span></span><br></pre></td></tr></table></figure><h3 id="4-å®¹å™¨æ“ä½œ"><a href="#4-å®¹å™¨æ“ä½œ" class="headerlink" title="4. å®¹å™¨æ“ä½œ"></a>4. å®¹å™¨æ“ä½œ</h3><h5 id="4-1-è¿è¡Œå’Œè¿›å…¥å®¹å™¨"><a href="#4-1-è¿è¡Œå’Œè¿›å…¥å®¹å™¨" class="headerlink" title="4.1 è¿è¡Œå’Œè¿›å…¥å®¹å™¨"></a>4.1 è¿è¡Œå’Œè¿›å…¥å®¹å™¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 16097:16097 -p 15098:15098  image_name <span class="comment"># å¯åŠ¨å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">docker extc -it å®¹å™¨åå­— bash <span class="comment"># è¿›å…¥å®¹å™¨å†…éƒ¨</span></span><br><span class="line">docker <span class="built_in">exec</span> -it å®¹å™¨ID  sh   <span class="comment"># è¿›å…¥å®¹å™¨å†…éƒ¨</span></span><br></pre></td></tr></table></figure><h5 id="4-2-çœ‹å®¹å™¨log"><a href="#4-2-çœ‹å®¹å™¨log" class="headerlink" title="4.2 çœ‹å®¹å™¨log"></a>4.2 çœ‹å®¹å™¨log</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f CONTAINER_ID</span><br><span class="line"></span><br><span class="line">docker logs -f --tail=100 CONTAINER_ID</span><br></pre></td></tr></table></figure><h5 id="4-3-å®¹å™¨å’Œå®¿ä¸»æ‹·è´å†…å®¹"><a href="#4-3-å®¹å™¨å’Œå®¿ä¸»æ‹·è´å†…å®¹" class="headerlink" title="4.3 å®¹å™¨å’Œå®¿ä¸»æ‹·è´å†…å®¹"></a>4.3 å®¹å™¨å’Œå®¿ä¸»æ‹·è´å†…å®¹</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp foo.txt mycontainer:/foo.txt </span><br><span class="line">docker cp mycontainer:/foo.txt foo.txt</span><br></pre></td></tr></table></figure><h5 id="4-4-å®¹å™¨è®¿é—®å®¿ä¸»ä¸»æœºç«¯å£"><a href="#4-4-å®¹å™¨è®¿é—®å®¿ä¸»ä¸»æœºç«¯å£" class="headerlink" title="4.4 å®¹å™¨è®¿é—®å®¿ä¸»ä¸»æœºç«¯å£"></a>4.4 å®¹å™¨è®¿é—®å®¿ä¸»ä¸»æœºç«¯å£</h5><ul><li><a href="https://jingsam.github.io/2018/10/16/host-in-docker.html" target="_blank" rel="noopener">https://jingsam.github.io/2018/10/16/host-in-docker.html</a></li></ul><h3 id="5-å‚è€ƒèµ„æ–™"><a href="#5-å‚è€ƒèµ„æ–™" class="headerlink" title="5. å‚è€ƒèµ„æ–™"></a>5. å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://blog.csdn.net/wdq347/article/details/78753322" target="_blank" rel="noopener">https://blog.csdn.net/wdq347/article/details/78753322</a> dockerä¹‹é•œåƒåˆ¶ä½œ</li><li><a href="https://deepzz.com/post/dockerfile-best-practices.html" target="_blank" rel="noopener">https://deepzz.com/post/dockerfile-best-practices.html</a> å¦‚ä½•å†™å¥½Dockerfileï¼ŒDockerfileæœ€ä½³å®è·µ</li></ul></div><div class="reward-container"><div>æ‚¨æ‰“èµçš„ä¸€å°æ­¥ï¼Œç»´å®‰é’±åŒ…æç°çš„ä¸€å¤§æ­¥( â€¢Ì€ Ï‰ â€¢Ì )</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>æ‰“èµ</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.jpg" alt="Levon å¾®ä¿¡æ”¯ä»˜"><p>å¾®ä¿¡æ”¯ä»˜</p></div><div style="display:inline-block"><img src="/images/alipay.jpg" alt="Levon æ”¯ä»˜å®"><p>æ”¯ä»˜å®</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/docker/" rel="tag"># docker</a></div><div class="post-nav"><div class="post-nav-item"><a href="/p/5d303099.html" rel="prev" title="golangçš„logåº“zapçš„ä½¿ç”¨"><i class="fa fa-chevron-left"></i> golangçš„logåº“zapçš„ä½¿ç”¨</a></div><div class="post-nav-item"><a href="/p/d319c20d.html" rel="next" title="pythonåŸºç¡€å®è·µ">pythonåŸºç¡€å®è·µ <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#0-å‰è¨€"><span class="nav-text">0. å‰è¨€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-FROM-ä»“åº“"><span class="nav-text">1. FROM ä»“åº“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-æŒ‡ä»¤"><span class="nav-text">2. æŒ‡ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-COPY-å’Œ-ADD-çš„åŒºåˆ«"><span class="nav-text">2.1 COPY å’Œ ADD çš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-RUN-å’Œ-CMD-çš„åŒºåˆ«"><span class="nav-text">2.2 RUN å’Œ CMD çš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3-ENTRYPOINT-å’Œ-CMDçš„åŒºåˆ«"><span class="nav-text">2.3 ENTRYPOINT å’Œ CMDçš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-9-ç¯å¢ƒå˜é‡å†™æ³•"><span class="nav-text">2.9 ç¯å¢ƒå˜é‡å†™æ³•</span></a></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#3-æ„å»ºé•œåƒ"><span class="nav-text">3. æ„å»ºé•œåƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-æ„å»ºçš„ä¸Šä¸‹æ–‡"><span class="nav-text">3.1 æ„å»ºçš„ä¸Šä¸‹æ–‡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-é•œåƒ-save-load"><span class="nav-text">3.2 é•œåƒ save load</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-å®¹å™¨æ“ä½œ"><span class="nav-text">4. å®¹å™¨æ“ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-è¿è¡Œå’Œè¿›å…¥å®¹å™¨"><span class="nav-text">4.1 è¿è¡Œå’Œè¿›å…¥å®¹å™¨</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-çœ‹å®¹å™¨log"><span class="nav-text">4.2 çœ‹å®¹å™¨log</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-å®¹å™¨å’Œå®¿ä¸»æ‹·è´å†…å®¹"><span class="nav-text">4.3 å®¹å™¨å’Œå®¿ä¸»æ‹·è´å†…å®¹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-4-å®¹å™¨è®¿é—®å®¿ä¸»ä¸»æœºç«¯å£"><span class="nav-text">4.4 å®¹å™¨è®¿é—®å®¿ä¸»ä¸»æœºç«¯å£</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-å‚è€ƒèµ„æ–™"><span class="nav-text">5. å‚è€ƒèµ„æ–™</span></a></li></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Levon" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">Levon</p><div class="site-description" itemprop="description">ä½ ä»¥å‰é‚£å¤´å‹å‘¢..ä½ å¾—æ”¯æ£±èµ·æ¥å•Š</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">172</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">40</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">97</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/unix2dos" title="GitHub â†’ https://github.com/unix2dos" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:levonfly@gmail.com" title="E-Mail â†’ mailto:levonfly@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://twitter.com/levonfly" title="Twitter â†’ https://twitter.com/levonfly" rel="noopener" target="_blank"><i class="twitter fa-fw"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://weibo.com/l6241425" title="Weibo â†’ https://weibo.com/l6241425" rel="noopener" target="_blank"><i class="weibo fa-fw"></i>Weibo</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">äº¬ICPå¤‡20000727å· </a><img src="/images/beian.png" style="display:inline-block"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502039978" rel="noopener" target="_blank">äº¬å…¬ç½‘å®‰å¤‡11010502039978å·</a></div><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Levon</span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var e,t,o,n,r,a=document.getElementsByTagName("link");if(0<a.length)for(i=0;i<a.length;i++)"canonical"==a[i].rel.toLowerCase()&&a[i].href&&(e=a[i].href);t=e?e.split(":")[0]:window.location.protocol.split(":")[0],e=e||window.location.href,window,n=e,r=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(n)||(o="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",r?(o+="?r="+encodeURIComponent(document.referrer),n&&(o+="&l="+n)):n&&(o+="?l="+n),(new Image).src=o)}()</script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'Y4ry1QHkYxVXKLQBrx6LJXld-gzGzoHsz',
      appKey     : 'TXITOypSvI7JO61NI8EG5exk',
      placeholder: "ç•™ä¸‹ä½ çš„è„šå°å§ğŸ‘£",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});</script></body></html>